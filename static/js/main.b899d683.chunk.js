(this.webpackJsonpblog=this.webpackJsonpblog||[]).push([[0],{20:function(e,t,a){},23:function(e,t,a){e.exports=a.p+"static/media/default-avatar.5097b024.png"},24:function(e,t,a){e.exports=a(43)},29:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(21),c=a.n(l),o=(a(29),a(1)),i=a(7),u=a(6),s=a.n(u),m=a(15),d=a(8),p=a(10),h=a.n(p);a(36),a(38);h.a.initializeApp({apiKey:"AIzaSyCzdM2fUflxU8vHbsqqTStC8h2WTtmSV_Y",authDomain:"blog-76eb2.firebaseapp.com",databaseURL:"https://blog-76eb2.firebaseio.com",projectId:"blog-76eb2",storageBucket:"blog-76eb2.appspot.com",messagingSenderId:"18470700220",appId:"1:18470700220:web:c6d2424a89f59a78a7fcb9",measurementId:"G-804XQ4R540"});var b=new h.a.auth.GoogleAuthProvider,E=h.a.auth(),f=h.a.firestore(),v=function(){E.signInWithPopup(b)},g=function(){var e=Object(d.a)(s.a.mark((function e(t,a){var n,r,l,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return n=f.doc("users/".concat(t.uid)),e.next=5,n.get();case 5:if(e.sent.exists){e.next=16;break}return r=t.email,l=t.displayName,c=t.photoURL,e.prev=8,e.next=11,n.set(Object(m.a)({displayName:l,email:r,photoURL:c},a));case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(8),console.error("Error creating user document",e.t0);case 16:return e.abrupt("return",O(t.uid));case 17:case"end":return e.stop()}}),e,null,[[8,13]])})));return function(t,a){return e.apply(this,arguments)}}(),O=function(){var e=Object(d.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,f.doc("users/".concat(t)).get();case 5:return a=e.sent,e.abrupt("return",Object(m.a)({uid:t},a.data()));case 9:e.prev=9,e.t0=e.catch(2),console.error("Error fetching user",e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),j=h.a,y=function(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(""),u=Object(i.a)(c,2),s=u[0],m=u[1],d=Object(n.useState)(null),p=Object(i.a)(d,2),h=p[0],b=p[1],f=function(e){var t=e.currentTarget,a=t.name,n=t.value;"userEmail"===a?l(n):"userPassword"===a&&m(n)};return r.a.createElement("div",null,r.a.createElement("h1",null,"Sign In"),r.a.createElement("div",null,null!==h&&r.a.createElement("div",null,h),r.a.createElement("form",null,r.a.createElement("label",{htmlFor:"userEmail"},"Email:"),r.a.createElement("input",{type:"email",name:"userEmail",value:a,placeholder:"yourEmail@gmail.com",id:"userEmail",onChange:function(e){return f(e)}}),r.a.createElement("label",{htmlFor:"userPassword"},"Password:"),r.a.createElement("input",{type:"password",name:"userPassword",value:s,placeholder:"Your Password",id:"userPassword",onChange:function(e){return f(e)}}),r.a.createElement("button",{onClick:function(e){!function(e,t,a){e.preventDefault(),E.signInWithEmailAndPassword(t,a).catch((function(e){b(e.code+": "+e.message),console.error(e)}))}(e,a,s)}},"Sign in")),r.a.createElement("p",null,"or"),r.a.createElement("button",{onClick:v},"Sign in with Google"),r.a.createElement("p",null,"Don't have an account?"," ",r.a.createElement(o.a,{to:"signUp"},"Sign up here")," ",r.a.createElement("br",null)," ",r.a.createElement(o.a,{to:"passwordReset"},"Forgot Password?"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(o.a,{to:"guest"},"Continue as guest"))))},w=function(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(""),u=Object(i.a)(c,2),m=u[0],p=u[1],h=Object(n.useState)(""),b=Object(i.a)(h,2),f=b[0],O=b[1],j=Object(n.useState)(null),y=Object(i.a)(j,2),w=y[0],k=y[1],C=function(){var e=Object(d.a)(s.a.mark((function e(t,a,n){var r,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,E.createUserWithEmailAndPassword(a,n);case 4:r=e.sent,c=r.user,g(c,{displayName:f}),Object(o.c)("/"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0),k(e.t0.code+": "+e.t0.message);case 14:l(""),p(""),O("");case 17:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,a,n){return e.apply(this,arguments)}}(),x=function(e){var t=e.currentTarget,a=t.name,n=t.value;"userEmail"===a?l(n):"userPassword"===a?p(n):"displayName"===a&&O(n)};return r.a.createElement("div",{className:"mt-8"},r.a.createElement("h1",{className:"text-3xl mb-2 text-center font-bold"},"Sign Up"),r.a.createElement("div",{className:"border border-blue-400 mx-auto w-11/12 md:w-2/4 rounded py-8 px-4 md:px-8"},null!==w&&r.a.createElement("div",{className:"py-4 bg-red-600 w-full text-white text-center mb-3"},w),r.a.createElement("form",{className:""},r.a.createElement("label",{htmlFor:"displayName",className:"block"},"Display Name:"),r.a.createElement("input",{type:"text",className:"my-1 p-1 w-full ",name:"displayName",value:f,placeholder:"E.g: Faruq",id:"displayName",onChange:function(e){return x(e)}}),r.a.createElement("label",{htmlFor:"userEmail",className:"block"},"Email:"),r.a.createElement("input",{type:"email",className:"my-1 p-1 w-full",name:"userEmail",value:a,placeholder:"E.g: faruq123@gmail.com",id:"userEmail",onChange:function(e){return x(e)}}),r.a.createElement("label",{htmlFor:"userPassword",className:"block"},"Password:"),r.a.createElement("input",{type:"password",className:"mt-1 mb-3 p-1 w-full",name:"userPassword",value:m,placeholder:"Your Password",id:"userPassword",onChange:function(e){return x(e)}}),r.a.createElement("button",{className:"bg-green-400 hover:bg-green-500 w-full py-2 text-white",onClick:function(e){C(e,a,m)}},"Sign up")),r.a.createElement("p",{className:"text-center my-3"},"or"),r.a.createElement("button",{className:"bg-red-500 hover:bg-red-600 w-full py-2 text-white",onClick:v},"Sign In with Google"),r.a.createElement("p",{className:"text-center my-3"},"Already have an account?"," ",r.a.createElement(o.a,{to:"/",className:"text-blue-500 hover:text-blue-600"},"Sign in here"))))},k=a(2),C=a(3),x=a(5),S=a(4),N=Object(n.createContext)({user:null}),D=function(e){Object(x.a)(a,e);var t=Object(S.a)(a);function a(){var e;Object(k.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={user:null},e.componentDidMount=Object(d.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:E.onAuthStateChanged(function(){var t=Object(d.a)(s.a.mark((function t(a){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g(a);case 2:t.sent,e.setState({user:a});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)}))),e}return Object(C.a)(a,[{key:"render",value:function(){return r.a.createElement(N.Provider,{value:this.state.user},this.props.children)}}]),a}(n.Component),P=a(23),U=a.n(P);a(20);var T=function(e){return r.a.createElement("div",{className:"h100"},r.a.createElement("button",{onClick:function(){Object(o.c)("/")}},"Blogs"),r.a.createElement("button",{onClick:function(){Object(o.c)("/profile")}},"Profile"),r.a.createElement("button",{onClick:function(){E.signOut(),Object(o.c)("/")}},"Sign out"),r.a.createElement("div",null,e.children))},F=function(){var e=Object(n.useContext)(N),t=e.photoURL,a=e.displayName,l=e.email,c=r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("div",{style:{background:"url(".concat(t||U.a,")  no-repeat center center"),backgroundSize:"cover",height:"100px",width:"100px",borderRadius:"10px"}}," "),r.a.createElement("div",null,r.a.createElement("h2",null,a),r.a.createElement("h3",null,l))),r.a.createElement("button",{onClick:function(){E.signOut(),Object(o.c)("/")}},"Sign out"));return r.a.createElement(T,null,c)},A=function(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(!1),u=Object(i.a)(c,2),s=u[0],m=u[1],d=Object(n.useState)(null),p=Object(i.a)(d,2),h=p[0],b=p[1];return r.a.createElement("div",null,r.a.createElement("h1",null,"Reset your Password"),r.a.createElement("div",null,r.a.createElement("form",{action:""},s&&r.a.createElement("div",null,"An email has been sent to you!"),null!==h&&r.a.createElement("div",null,h),r.a.createElement("label",{htmlFor:"userEmail"},"Email:"),r.a.createElement("input",{type:"email",name:"userEmail",id:"userEmail",value:a,placeholder:"Input your email",onChange:function(e){var t=e.currentTarget,a=t.name,n=t.value;"userEmail"===a&&l(n)}}),r.a.createElement("button",{onClick:function(e){e.preventDefault(),E.sendPasswordResetEmail(a).then((function(){m(!0),setTimeout((function(){m(!1)}),3e3)})).catch((function(){b("Error resetting password")}))}},"Send me a reset link")),r.a.createElement(o.a,{to:"/"},"\u2190 back to sign in page")))},I=function(e){Object(x.a)(a,e);var t=Object(S.a)(a);function a(e){var n;return Object(k.a)(this,a),(n=t.call(this,e)).onChange=function(e){var t=n.state;t[e.target.name]=e.target.value,n.setState(t)},n.onSubmit=function(e){e.preventDefault();var t=n.state,a=t.title,r=t.desc,l=t.posted,c=t.updated,i=t.cover;n.ref.add({title:a,desc:r,posted:l,updated:c,cover:i}).then((function(e){n.setState({title:"",desc:"",posted:Date.now(),updated:Date.now(),cover:""}),Object(o.c)("/".concat(e.id))})).catch((function(e){console.error("Error adding document: ",e)}))},n.ref=j.firestore().collection("posts"),n.state={title:"",desc:"",posted:Date.now(),updated:Date.now(),cover:"default cover"},n}return Object(C.a)(a,[{key:"render",value:function(){var e=this.state,t=e.title,a=e.desc;return r.a.createElement(T,null,r.a.createElement("div",null,r.a.createElement("h4",null,"new post"),r.a.createElement("h4",null,r.a.createElement(o.a,{to:"/"},"browse")),r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("label",{htmlFor:"title"},"Title:"),r.a.createElement("input",{type:"text",name:"title",value:t,onChange:this.onChange,placeholder:"Title"}),r.a.createElement("label",{htmlFor:"desc"},"Description:"),r.a.createElement("textArea",{name:"desc",onChange:this.onChange,placeholder:"Description",cols:"80",rows:"3"},a),r.a.createElement("button",{type:"submit"},"Submit"))))}}]),a}(n.Component),R=function(e){Object(x.a)(a,e);var t=Object(S.a)(a);function a(e){var n;return Object(k.a)(this,a),(n=t.call(this,e)).onChange=function(e){var t=n.state;t[e.target.name]=e.target.value,n.setState({post:t})},n.onSubmit=function(e){e.preventDefault();var t=n.state,a=t.title,r=t.desc,l=t.posted,c=t.updated,i=void 0===c?Date.now():c,u=t.cover;j.firestore().collection("posts").doc(n.state.key).set({title:a,desc:r,posted:l,updated:i,cover:u}).then((function(e){n.setState({key:"",title:"",desc:"",posted:"",updated:"",cover:""}),Object(o.c)("../")})).catch((function(e){console.error("Error: ",e)})),console.log("reached")},n.state={key:"",title:"",desc:"",posted:"",updated:"",cover:""},n}return Object(C.a)(a,[{key:"componentDidMount",value:function(){var e=this;j.firestore().collection("posts").doc(this.props.id).get().then((function(t){if(t.exists){var a=t.data();e.setState({key:t.id,title:a.title,desc:a.desc,posted:a.posted,updated:a.updated,cover:a.cover})}else console.log("Cannot find document")}))}},{key:"render",value:function(){return r.a.createElement(T,null,r.a.createElement("h3",null,"Edit"),r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("label",{htmlFor:"title"},"Title:"),r.a.createElement("input",{type:"text",name:"title",value:this.state.title,onChange:this.onChange,placeholder:"Title"}),r.a.createElement("label",{htmlFor:"desc"},"Description:"),r.a.createElement("input",{type:"text",name:"desc",value:this.state.desc,onChange:this.onChange,placeholder:"Description"}),r.a.createElement("label",{htmlFor:"cover"},"Cover:"),r.a.createElement("input",{type:"text",name:"cover",value:this.state.cover,onChange:this.onChange,placeholder:"cover"}),r.a.createElement("button",{type:"submit"},"Submit")))}}]),a}(n.Component);function M(e){var t=Object(n.useContext)(N),a="iangu234@gmail.com"===t.email||"ian.gu@mail.utoronto.ca"===t.email;return r.a.createElement(R,Object.assign({admin:a},e))}var L=function(e){Object(x.a)(a,e);var t=Object(S.a)(a);function a(e){var n;return Object(k.a)(this,a),(n=t.call(this,e)).state={post:{},key:""},n}return Object(C.a)(a,[{key:"componentDidMount",value:function(){var e=this;j.firestore().collection("posts").doc(this.props.id).get().then((function(t){t.exists?e.setState({post:t.data(),key:t.id,isLoading:!1}):console.log("Could not find document")}))}},{key:"render",value:function(){return r.a.createElement(T,null,r.a.createElement("div",null,r.a.createElement(o.a,{to:"/"},"Home"),this.props.admin?r.a.createElement(o.a,{to:"/".concat(this.state.key,"/edit")},"Edit"):null,r.a.createElement("br",null),"Title: ",this.state.post.title,r.a.createElement("br",null),"Desc: ",this.state.post.desc))}}]),a}(n.Component);function W(e){var t=Object(n.useContext)(N),a="iangu234@gmail.com"===t.email||"ian.gu@mail.utoronto.ca"===t.email;return r.a.createElement(L,Object.assign({admin:a},e))}var B=function(e){Object(x.a)(a,e);var t=Object(S.a)(a);function a(e){var n;return Object(k.a)(this,a),(n=t.call(this,e)).onCollectionUpdate=function(e){var t=[];e.forEach((function(e){var a=e.data(),n=a.title,r=a.desc,l=a.cover,c=a.posted,o=a.updated;t.push({key:e.id,doc:e,title:n,desc:r,cover:l,posted:c,updated:o})})),n.setState({posts:t})},n.ref=j.firestore().collection("posts"),n.unsubscribe=null,n.state={posts:[]},n}return Object(C.a)(a,[{key:"componentDidMount",value:function(){this.unsubscribe=this.ref.onSnapshot(this.onCollectionUpdate)}},{key:"render",value:function(){var e=r.a.createElement("div",null,this.props.admin?r.a.createElement(o.a,{to:"/new"},"Add post"):r.a.createElement("div",null," "),r.a.createElement("table",{style:{margin:"auto"}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Title"),r.a.createElement("th",null,"Description"))),r.a.createElement("tbody",null,this.state.posts.map((function(e){return r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(o.a,{to:"/".concat(e.key)},e.title)),r.a.createElement("td",null,e.desc))})))));return r.a.createElement(T,null,e)}}]),a}(n.Component);function q(e){var t=Object(n.useContext)(N),a="iangu234@gmail.com"===t.email||"ian.gu@mail.utoronto.ca"===t.email;return r.a.createElement(B,Object.assign({admin:a},e,{user:t}))}var z=function(e){return r.a.createElement("div",{className:"h100"},r.a.createElement("button",{onClick:function(){Object(o.c)("/guest")}},"Blogs"),r.a.createElement("button",{onClick:function(){Object(o.c)("/")}},"Sign in"),r.a.createElement("button",{onClick:function(){Object(o.c)("/signUp")}},"Sign up"),r.a.createElement("div",null,e.children))},G=function(e){Object(x.a)(a,e);var t=Object(S.a)(a);function a(e){var n;return Object(k.a)(this,a),(n=t.call(this,e)).onCollectionUpdate=function(e){var t=[];e.forEach((function(e){var a=e.data(),n=a.title,r=a.desc,l=a.cover,c=a.posted,o=a.updated;t.push({key:e.id,doc:e,title:n,desc:r,cover:l,posted:c,updated:o})})),n.setState({posts:t})},n.ref=j.firestore().collection("posts"),n.unsubscribe=null,n.state={posts:[]},n}return Object(C.a)(a,[{key:"componentDidMount",value:function(){this.unsubscribe=this.ref.onSnapshot(this.onCollectionUpdate)}},{key:"render",value:function(){return r.a.createElement(z,null,r.a.createElement("div",null,r.a.createElement("table",{style:{margin:"auto"}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Title"),r.a.createElement("th",null,"Description"))),r.a.createElement("tbody",null,this.state.posts.map((function(e){return r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(o.a,{to:"/guest/".concat(e.key)},e.title)),r.a.createElement("td",null,e.desc))}))))))}}]),a}(n.Component),Y=function(e){Object(x.a)(a,e);var t=Object(S.a)(a);function a(e){var n;return Object(k.a)(this,a),(n=t.call(this,e)).state={post:{},key:""},n}return Object(C.a)(a,[{key:"componentDidMount",value:function(){var e=this;j.firestore().collection("posts").doc(this.props.id).get().then((function(t){t.exists?e.setState({post:t.data(),key:t.id,isLoading:!1}):console.log("Could not find document")}))}},{key:"render",value:function(){return r.a.createElement(z,null,r.a.createElement("div",null,r.a.createElement("br",null),"Title: ",this.state.post.title,r.a.createElement("br",null),"Desc: ",this.state.post.desc))}}]),a}(n.Component);var H=function(){var e=Object(n.useContext)(N);return e?"iangu234@gmail.com"===e.email||"ian.gu@mail.utoronto.ca"===e.email?r.a.createElement(o.b,null,r.a.createElement(q,{path:"/"}),r.a.createElement(F,{path:"/profile"}),r.a.createElement(I,{path:"/new"}),r.a.createElement(M,{path:"/:id/edit"}),r.a.createElement(W,{path:"/:id"})):r.a.createElement(o.b,null,r.a.createElement(F,{path:"/profile"}),r.a.createElement(q,{path:"/"}),r.a.createElement(W,{path:"/:id"})):r.a.createElement(o.b,null,r.a.createElement(w,{path:"signUp"}),r.a.createElement(y,{path:"/"}),r.a.createElement(A,{path:"passwordReset"}),r.a.createElement(G,{path:"guest"}),r.a.createElement(Y,{path:"guest/:id"}))};a(42);var J=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(D,null,r.a.createElement(H,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(J,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[24,1,2]]]);
//# sourceMappingURL=main.b899d683.chunk.js.map